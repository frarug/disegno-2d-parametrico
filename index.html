<!-- index.html -->
<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Editor vettoriale 2D</title>
  <link rel="stylesheet" href="styles.css" />
  <!--link rel="stylesheet" href="palette.css" /-->
</head>
<body>

  <!-- Contenitore principale -->
  <div id="app-container" class="app-container">

    <!-- Area di disegno -->
    <div class="svg-container">
      <svg id="canvas" xmlns="http://www.w3.org/2000/svg">
        <!-- Gruppo principale soggetto a pan e zoom -->
        <g id="grid-layer" pointer-events="none"></g>
        <g id="elements-layer"></g>
        <g id="axes-layer" pointer-events="none"></g>
        <g id="overlay-layer"></g>
      </svg>
    </div>

    <!-- Palette di controllo caricata dinamicamente -->
    <div id="palette-container"></div>
  </div>

  <!-- Script principali -->
  <!--script src="debug-event-listeners.js"></script-->
  <script src="globals.js"></script>     <!-- Gestione stato globale -->
  <script src="graphics.js"></script> <!-- icone per la gui -->
  <script src="shapes.js"></script> <!-- elementi grafici -->  
  <script src="drawing.js"></script>   <!-- Disegno della scena -->
  <script src="interactions.js"></script> <!-- Pan e zoom ecc. -->
  <script src="palette.js"></script>   <!-- Gestione palette -->
  
  <!-- Inizializzazione globale  -->
  <script>
    async function initApp() {
      await loadPalette(); // Carica e inserisce palette.html
      //initPalette();       // Inizializza event listeners in palette.js
      initDrawingCanvas(); // Inizializza SVG e disegno
      //forme di prova
      addShapeToCanvas("rect", new Rect(20, 16, 20, 40, {fill:"#ffaa00", fillOpacity:0.6}));
      addShapeToCanvas("circle", new Circle(3, 6, 40, {fill:"#ffffaa", fillOpacity:0.6}));
      addShapeToCanvas("line", new Line(3, 6, 20, 40, {stroke:"#ff0000", strokeWidth:4, strokeOpacity:0.4}));
      addShapeToCanvas("line", new Line(30, 26, 50, 60, {stroke:"#ffff00", strokeWidth:2, strokeOpacity:0.8}));
      //addShapeToCanvas("circle", new Circle(32, 136, 60, {fill:"#00ffaa", fillOpacity:0.7}));
      addShapeToCanvas("ellipse", new Ellipse(62, 186, 60, 45, {fill:"#d62e7f", fillOpacity:0.8}));
      //addShapeToCanvas("arc", new Arc(162, 200, 160, 0, 30, 1, 1, {fill:"#d62e7f", fillOpacity:0.8}));
      //addShapeToCanvas("ellipse-arc", EllipseArc.fromCenter(100, 200, 80, 40, 370, 765, 30, {fill:"#2867b8", fillOpacity:0.8}));
      //fine forme di prova
      renderCanvas();
    }
    window.addEventListener("DOMContentLoaded", initApp);
  </script>
 
<!-- Palette di disegno in basso -->
<!-- Inizio Palette di Disegno -->
<div id="drawing-palette" class="draggable-palette">
  <div id="paletteHeader" class="paletteH-header">
    <svg class="drag-icon" width="16" height="16" viewBox="0 0 20 20" fill="white" xmlns="http://www.w3.org/2000/svg">
      <rect y="4" width="20" height="2"/>
      <rect y="9" width="20" height="2"/>
      <rect y="14" width="20" height="2"/>
    </svg>
  </div>
  <button id="center-origin-btn" title="Riporta l'origine al centro">
    <svg width="24" height="24" viewBox="0 0 24 24" info="Freccia stilizzata (esempio semplificato)">
      <line x1="2" y1="12" x2="22" y2="12" stroke="black" stroke-width="2"/>
      <polygon points="18,8 22,12 18,16" fill="black"/>
    </svg>
  </button>

  <!-- Selettore forma -->
  <select id="shape-select" title="Seleziona la forma (c, a, l, r, e)">
    <option value="line">Linea (L)</option>
    <option value="circle">Cerchio (C)</option>
    <option value="arc">Arco (A)</option>
    <option value="rect">Rettangolo (R)</option>
    <option value="ellipse">Ellisse (E)</option>
  </select>
  <!-- Parametri forma dinamici da inserire dinamicamente-->
  <div id="shape-params"></div>
  <!-- Pulsante per aggiungere la forma -->
  <button id="add-shape-btn" title="Aggiungi la forma al disegno">Aggiungi</button>
 
  <!-- Checkbox per disegnare dall'ultimo punto -->
  <label>
    <input type="checkbox" id="draw-from-last-point" />
    Disegna dal punto precedente
  </label>
</div>
<script src="drawing-palette.js"></script>

<!-- Fine Palette di Disegno -->
</body>
</html>